import { AppColors } from '../common/constants/AppColors';
import { router } from '@kit.ArkUI';

/**
 * 隐私政策页
 */
@Entry
@Component
struct PrivacyPolicyPage {
  build() {
    Column() {
      Row() {
        SymbolGlyph($r('sys.symbol.arrow_left'))
          .fontSize(24).fontColor([AppColors.TEXT_PRIMARY]).onClick(() => { router.back(); })
        Text('隐私政策').fontSize(18).fontWeight(FontWeight.Medium)
          .fontColor(AppColors.TEXT_PRIMARY).layoutWeight(1).textAlign(TextAlign.Center)
        Column().width(24)
      }
      .width('100%').height(56).padding({ left: 16, right: 16 })
      .backgroundColor(AppColors.CARD_BACKGROUND)

      Scroll() {
        Column({ space: 16 }) {
          Text('行途（Go Nomads）隐私政策')
            .fontSize(22).fontWeight(FontWeight.Bold).fontColor(AppColors.TEXT_PRIMARY)
          Text('生效日期: 2026年2月10日')
            .fontSize(13).fontColor(AppColors.TEXT_TERTIARY)

          this.Section('引言',
            '欢迎使用「行途」（Go Nomads）。行途是一款专为数字游民打造的一站式社区与服务平台，提供城市探索、共享办公空间查询、社区活动、即时通讯、AI 行程规划等功能。我们深知个人信息对您的重要性，并将竭尽全力保护您的隐私安全。本隐私政策详细说明了我们在您使用行途移动应用程序、网站及相关服务时，如何收集、使用、存储、共享和保护您的个人信息。使用我们的服务即表示您同意本政策中描述的数据处理方式。')

          this.Section('一、我们收集的信息',
            '我们可能收集以下类型的信息：\n\n'
            + '1. 您主动提供的信息\n'
            + '• 账号信息：手机号码、邮箱地址、用户名、头像、个人简介等注册与个人资料信息。\n'
            + '• 社区内容：您发布的帖子、评论、活动信息、共享办公空间评价等用户生成内容。\n'
            + '• 通讯信息：您通过即时聊天功能发送的消息内容（端到端加密传输）。\n'
            + '• 行程数据：您在 AI 行程规划功能中输入的旅行偏好和目的地信息。\n\n'
            + '2. 自动收集的信息\n'
            + '• 设备信息：设备品牌及型号、操作系统版本、屏幕分辨率、语言设置。\n'
            + '• 日志信息：访问时间、浏览页面、崩溃日志、功能使用频率。\n'
            + '• 网络信息：IP地址、网络类型、运营商信息、网络连接状态。\n\n'
            + '3. 为识别您的设备并预防恶意程序及反作弊、提高服务安全性、保障运营质量及效率，我们会收集您的设备信息（包括IMEI、设备序列号、OAID、MEID、Android ID、IMSI、GUID、MAC地址、SIM卡序列号）、已安装APP信息或运行中的进程信息。\n\n'
            + '4. 为实现垃圾清理与运行加速功能，我们将请求您的存储权限获取外置存储信息（SD卡数据），用以检查手机CPU、内存和SD卡情况。\n\n'
            + '5. 当您播放视频等内容时，为了适配您的设备状态，我们会调用设备的重力、加速度等传感器信息，以识别您的设备横竖屏状态。\n\n'
            + '6. 在您分享或接收被分享的信息时，需要在本地访问您的剪切板，读取其中包含的口令、分享码、链接，以实现跳转、分享、活动联动等功能或服务。')

          this.Section('二、经您授权后收集的信息',
            '• 精确位置信息：允许应用基于 GPS、基站、Wi-Fi 等网络源获取您的精确位置信息，用于推荐附近城市、共享办公空间和周边活动。开启此权限可能会增加设备耗电量。\n'
            + '• 大致位置信息：允许应用基于基站、Wi-Fi 等网络源获取您的大致位置信息，用于城市级别的推荐和内容展示。\n'
            + '• 后台位置信息：如应用已获取了位置权限，允许应用在后台运行时使用位置信息，用于旅行足迹自动记录和位置变更提醒。您可以随时在系统设置中关闭此权限。\n'
            + '• 读取日历：读取、保存、分享本机存储的日历数据，用于在日历视图中展示已添加的活动和聚会日程。\n'
            + '• 写入日历：新建、修改、删除日历活动，用于将社区活动和聚会一键添加到您的系统日历并设置提醒。\n'
            + '• 麦克风：录制音频，用于即时聊天中录制和发送语音消息。仅在您主动触发时使用，不会在后台录音。\n'
            + '• 读取存储：读取存储上的照片、媒体内容和文件，用于选择头像、发布社区图片、读取缓存文件等。\n'
            + '• 写入存储：保存照片和缓存数据，获取外置存储信息（SD卡数据），用以检查手机CPU、内存和SD卡情况。\n'
            + '• 相机：用于拍摄头像照片和社区内容图片。\n'
            + '• 通知权限：用于推送活动提醒、消息通知等。\n\n'
            + '所有敏感权限均在您使用对应功能时才会申请，未经您的明确授权，我们不会主动收集相关信息。您可以随时在设备系统设置中查看和管理已授权的权限。')

          this.Section('三、信息使用方式',
            '我们收集的信息将用于以下用途：\n\n'
            + '• 提供核心服务：账号注册与登录、城市信息展示、共享办公空间查询、社区功能、即时通讯、AI 行程规划。\n'
            + '• 个性化体验：根据您的位置和偏好推荐城市、办公空间和社区活动。\n'
            + '• 服务改进：分析服务使用情况与性能数据，优化产品功能与用户体验。\n'
            + '• 安全保障：识别与防范欺诈行为、垃圾信息及安全威胁，保护您的账号安全。\n'
            + '• 通知与沟通：发送服务通知、活动提醒和安全警报。\n'
            + '• 法律合规：遵守适用的法律法规要求。')

          this.Section('四、信息共享与披露',
            '我们不会出售您的个人信息。仅在以下情形下，我们可能会与第三方共享您的信息：\n\n'
            + '• 服务提供商：我们与受信任的第三方合作来运营服务，包括云存储、消息推送、支付处理和数据分析服务商。这些合作方仅能在为我们提供服务的范围内访问您的信息，并受到严格的数据保护协议约束。\n'
            + '• 社区互动：您在社区中公开发布的内容对其他用户可见，请谨慎分享个人敏感信息。\n'
            + '• 法律要求：当法律法规要求、政府部门依法调查或为保护我们及用户的合法权益时，我们可能会披露您的信息。\n'
            + '• 业务转让：如发生合并、收购或资产出售，您的信息可能作为交易资产的一部分被转移，届时我们会通知您。\n'
            + '• 征得同意：在上述情形之外，我们将在征得您明确同意后才共享您的信息。')

          this.Section('五、数据存储与安全',
            '• 存储位置：您的数据存储在位于安全数据中心的云服务器上，我们选择符合行业安全标准的云服务提供商。\n'
            + '• 存储期限：我们仅在实现本政策所述目的所需的最短时间内保留您的个人信息。当您注销账号后，我们将在合理期限内删除或匿名化您的个人数据，法律法规另有要求的除外。\n'
            + '• 安全措施：我们采用业界标准的安全技术保护您的数据，包括但不限于：HTTPS/TLS 加密传输、数据库加密存储、访问控制与权限管理、定期安全审计与漏洞扫描、消息通讯端到端加密。\n'
            + '• 安全事件：尽管我们尽力保护数据安全，但无法保证绝对安全。如发生数据泄露，我们将按照法律要求及时通知受影响的用户并采取补救措施。')

          this.Section('六、您的权利',
            '根据适用的数据保护法律，您享有以下权利：\n\n'
            + '• 访问权：您可以随时在应用内查看和访问您的个人资料信息。\n'
            + '• 更正权：您可以在个人设置中修改、更新您的账号信息和个人资料。\n'
            + '• 删除权：您可以申请删除您的账号及关联的个人数据。请通过「设置 > 账号 > 注销账号」操作，或发送邮件至 hi@gonomads.app 提交删除请求。我们将在 15 个工作日内处理。\n'
            + '• 数据导出：您可以申请导出您的个人数据副本，我们将以通用格式提供。\n'
            + '• 撤回同意：您可以随时在设备系统设置中撤回位置、相机、通知等权限的授权。撤回同意不影响此前基于您同意的处理行为的合法性。')

          this.Section('七、儿童隐私',
            '行途的服务面向 16 周岁及以上的用户。我们不会在知情的情况下收集 16 周岁以下儿童的个人信息。如果我们发现无意中收集了儿童的个人信息，将立即采取措施删除相关数据。如果您是家长或监护人，发现您的孩子在未经同意的情况下向我们提供了个人信息，请联系 hi@gonomads.app，我们将及时处理。')

          this.Section('八、隐私政策变更',
            '我们可能会不时更新本隐私政策，以反映服务变化或法律法规的要求。更新后的政策将在本页面发布，并更新顶部的「生效日期」。对于重大变更，我们将通过应用内通知、推送消息或电子邮件等方式提前告知您。继续使用我们的服务即表示您接受更新后的隐私政策。')

          this.Section('九、联系我们',
            '如果您对本隐私政策有任何疑问、意见或请求，欢迎通过以下方式联系我们：\n\n'
            + '• 电子邮件：hi@gonomads.app\n'
            + '• 应用内反馈：设置 > 帮助与反馈\n\n'
            + '我们将在收到您的请求后 15 个工作日内予以回复。感谢您对行途的信任与支持。')

          Column().height(40)
        }
        .padding({ left: 20, right: 20, top: 20 })
        .alignItems(HorizontalAlign.Start)
      }
      .layoutWeight(1).scrollBar(BarState.Auto)
    }
    .width('100%').height('100%').backgroundColor(AppColors.BACKGROUND)
  }

  @Builder
  Section(title: string, content: string) {
    Column({ space: 6 }) {
      Text(title).fontSize(16).fontWeight(FontWeight.Medium).fontColor(AppColors.TEXT_PRIMARY)
      Text(content).fontSize(14).fontColor(AppColors.TEXT_SECONDARY).lineHeight(22)
    }
    .width('100%').alignItems(HorizontalAlign.Start)
  }
}
